<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  <title>Diff</title>
  <script src="./Diff, Match and Patch_ Demo of Diff_files/diff_match_patch.js"></script>
</head>

<body>
<h1>Diff</h1>
<h2>Demo of Diff</h2>


<script>
var dmp = new diff_match_patch();

function launch() {
  
  var text1 = document.getElementById('text1').value;
  var text2 = document.getElementById('text2').value;
  dmp.Diff_Timeout = parseFloat(document.getElementById('timeout').value);
  dmp.Diff_EditCost = parseFloat(document.getElementById('editcost').value);
  // dmp object holds the diffs
  var ms_start = (new Date()).getTime();
  // d is the diffs between the two texts
  // diff_main("Good dog", "Bad dog") â†’ [(-1, "Goo"), (1, "Ba"), (0, "d dog")]
  var d = dmp.diff_main(text1, text2);
  var ms_end = (new Date()).getTime();

  if (document.getElementById('semantic').checked) {
    dmp.diff_cleanupSemantic(d);
  }
  if (document.getElementById('efficiency').checked) {
    dmp.diff_cleanupEfficiency(d);
    
  }
  console.log(d)
  var ds = dmp.diff_prettyHtml(d);
  for (change in d){
    console.log(d[change])
    if(d[change][0] == -1){
      console.log(d[change][1])
    }
  }
  document.getElementById('outputdiv').innerHTML = ds + '<BR>Time: ' + (ms_end - ms_start) / 1000 + 's';
}
</script>

<form action="" onsubmit="return false">
<table width="100%"><tbody><tr>
  <td width="50%">
<h3>Text Version 1:</h3>
<textarea id="text1" style="width: 100%" rows="10">On [[DATE]] John said he would</textarea></td>
  <td width="50%">
<h3>Text Version 2:</h3>
<textarea id="text2" style="width: 100%" rows="10">On January 21st, 2019 John said he would</textarea></td>
</tr></tbody></table>

<h3>Diff timeout:</h3>
<p><input type="text" size="3" maxlength="5" value="1" id="timeout"> seconds<br>
</p>

<h3>Post-diff cleanup:</h3>
<dl>
<dt><input type="radio" name="cleanup" id="semantic" checked="">
<label for="semantic">Semantic Cleanup</label></dt>

<dt><input type="radio" name="cleanup" id="efficiency">
<label for="efficiency">Efficiency Cleanup</label>,
edit cost: <input type="text" size="3" maxlength="5" value="4" id="editcost">
</dt>
<dt><input type="radio" name="cleanup" id="raw">
<label for="raw">No Cleanup</label></dt>
<dd>Raw output.</dd>
</dl>

<p><input type="button" onclick="launch()" value="Diff"></p>
</form>

<div id="outputdiv"></div>

<hr>


</body></html>